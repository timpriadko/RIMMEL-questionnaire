"use strict";$(document).ready(function(){function e(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,6})+$/.test(e)}function t(e){var t=[];return e.each(function(){""===$(this).val()?(t.push(!1),$(this).closest("div").addClass("required")):(t.push(!0),$(this).closest("div").removeClass("required"))}),!t.includes(!1)}function a(){t(p),!0===t(p)?(u.removeAttr("disabled"),d.removeClass("disabled")):(u.attr("disabled","disabled"),d.addClass("disabled"))}$(document).bind("contextmenu",function(e){return!1}),$("input").focus(function(){$(this).parents(".form-group").addClass("focused")}),$("input").blur(function(){""==$(this).val()?($(this).removeClass("filled"),$(this).parents(".form-group").removeClass("focused")):$(this).addClass("filled")});var n=$("#email"),r=$("#customer_form_label"),o=$("#customer_form_submit"),l=$(".user-form input[type=text]:not([name=address2])"),c=$("select[name=country]"),i=$("#terms"),s=function(){e(n.val())||n.hasClass("required")?n.closest("div").removeClass("invalid-email"):n.closest("div").addClass("invalid-email"),t(l),e(n.val())&&!0===t(l)&&""!==c.val()&&$(i).is(":checked")?(o.removeAttr("disabled"),r.removeClass("disabled")):(o.attr("disabled","disabled"),r.addClass("disabled"))};n.change(function(){s()}),n.keyup(function(){s()}),l.keyup(function(){s()}),i.click(s);var d=$("#card_form_label"),u=$("#card_form_submit"),p=$(".card-form input:not([type=submit])");p.keyup(function(){a()});var f=$(".terms-btn"),m=$(".policy-btn"),x=$(".information-provided"),v=$("#modal-terms"),h=$("#modal-policy"),g=$("#modal-information"),_=$(".ui-close-modal");f.on("click",function(){v.addClass("show")}),m.on("click",function(){h.addClass("show")}),x.on("click",function(){g.addClass("show")}),_.on("click",function(){v.removeClass("show"),h.removeClass("show"),g.removeClass("show")}),$(".modal-wrap").click(function(e){e.target===$(".modal-wrap.show")[0]&&$(".modal-wrap").removeClass("show")});var C;!function(){C={monthAndSlashRegex:/^\d\d \/ $/,monthRegex:/^\d\d$/,el_cardNumber:".ccFormatMonitor",el_expDate:"#inputExpDate",el_cvv:".cvv",el_ccUnknown:"cc_type_unknown",el_ccTypePrefix:"cc_type_",el_monthSelect:"#monthSelect",el_yearSelect:"#yearSelect",cardTypes:{"American Express":{name:"American Express",code:"ax",security:4,pattern:/^3[47]/,valid_length:[15],formats:{length:15,format:"xxxx xxxxxxx xxxx"}},Visa:{name:"Visa",code:"vs",security:3,pattern:/^4/,valid_length:[16],formats:{length:16,format:"xxxx xxxx xxxx xxxx"}},Maestro:{name:"Maestro",code:"ma",security:3,pattern:/^(50(18|20|38)|5612|5893|63(04|90)|67(59|6[1-3])|0604)/,valid_length:[16],formats:{length:16,format:"xxxx xxxx xxxx xxxx"}},Mastercard:{name:"Mastercard",code:"mc",security:3,pattern:/^5[1-5]/,valid_length:[16],formats:{length:16,format:"xxxx xxxx xxxx xxxx"}}}},C.addListeners=function(){$(C.el_expDate).on("keydown",function(e){C.removeSlash(e)}),$(C.el_expDate).on("keyup",function(e){C.addSlash(e)}),$(C.el_expDate).on("blur",function(e){C.populateDate(e)}),$(C.el_cvv+", "+C.el_expDate).on("keypress",function(e){return e.charCode>=48&&e.charCode<=57})},C.addSlash=function(e){var t=C.monthRegex.exec(e.target.value);e.key>=0&&e.key<=9&&t&&(e.target.value=e.target.value+" / ")},C.removeSlash=function(e){C.monthAndSlashRegex.exec(e.target.value)&&"Backspace"===e.key&&(e.target.value=e.target.value.slice(0,-3))},C.populateDate=function(e){var t,a;7==e.target.value.length&&(t=parseInt(e.target.value.slice(0,-5)),a="20"+e.target.value.slice(5),C.checkMonth(t)?$(C.el_monthSelect).val(t):$(C.el_monthSelect).val(0),C.checkYear(a)?$(C.el_yearSelect).val(a):$(C.el_yearSelect).val(0))},C.checkMonth=function(e){if(e<=12){var t=C.getSelectOptions($(C.el_monthSelect));if(e=e.toString(),t.includes(e))return!0}},C.checkYear=function(e){if(C.getSelectOptions($(C.el_yearSelect)).includes(e))return!0},C.getSelectOptions=function(e){for(var t=e.find("option"),a=[],n=0;n<t.length;n++)a[n]=t[n].value;return a},C.setMaxLength=function(e,t){e.length&&C.isInteger(t)?e.attr("maxlength",t):e.length&&e.attr("maxlength","")},C.isInteger=function(e){return"number"==typeof e&&e%1==0},C.createExpDateField=function(){$(C.el_monthSelect+", "+C.el_yearSelect).hide(),$(C.el_monthSelect).parent().prepend('<input type="text" class="ccFormatMonitor">')},C.isValidLength=function(e,t){for(var a in t.valid_length)if(e.length<=t.valid_length[a])return!0;return!1},C.getCardType=function(e){for(var t in C.cardTypes){var a=C.cardTypes[t];if(e.match(a.pattern)&&C.isValidLength(e,a))return a}},C.getCardFormatString=function(e,t){for(var a in t.formats){var n=t.formats[a];if(e.length<=n.length)return n}},C.formatCardNumber=function(e,t){var a=0,n="",r="";if(!t)return e;for(var o=C.getCardFormatString(e,t),l=0;l<e.length;l++){if(r=l+a,!o||r>=o.length)return e;"x"!==o.charAt(r)?(a++,n+=o.charAt(r)+e.charAt(l)):n+=e.charAt(l)}return n},C.monitorCcFormat=function(e){var t=e.val().replace(/\D/g,""),a=C.getCardType(t);e.val(C.formatCardNumber(t,a)),C.addCardClassIdentifier(e,a)},C.addCardClassIdentifier=function(e,t){var a=C.el_ccUnknown;if(t?(a=C.el_ccTypePrefix+t.code,C.setMaxLength($(C.el_cvv),t.security)):C.setMaxLength($(C.el_cvv)),!e.hasClass(a)){var n="";for(var r in C.cardTypes)n+=C.el_ccTypePrefix+C.cardTypes[r].code+" ";e.removeClass(n+C.el_ccUnknown),e.addClass(a)}},C.init=function(){$(document).find(C.el_cardNumber).each(function(){var e=$(this);e.is("input")&&e.on("input",function(){C.monitorCcFormat(e)})}),C.addListeners()}()}(),$(".popup-open").click(function(e){e.preventDefault(),$(this).closest("div").find(".popup-wrapper").addClass("opened"),$(".main-contact").addClass("fixed")}),$(".popup__close").click(function(e){e.preventDefault(),$(".popup-wrapper").removeClass("opened")}),$(".popup-wrapper").click(function(e){e.preventDefault(),$(".popup-wrapper").removeClass("opened")})});